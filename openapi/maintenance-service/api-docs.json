{"openapi":"3.1.0","info":{"title":"Maintenance Service API","description":"API documentation for the Asset Service","version":"1.0.0"},"servers":[{"url":"http://localhost:9000","description":"API Gateway"}],"security":[{"bearerAuth":[]}],"tags":[{"name":"Maintenance Order Notes","description":"APIs for managing notes on maintenance orders"},{"name":"Maintenance Orders","description":"APIs for managing maintenance orders"}],"paths":{"/api/maintenance/orders/{id}":{"get":{"tags":["Maintenance Orders"],"summary":"Get a maintenance order by ID","operationId":"getOrderById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"400":{"description":"Invalid input","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse","contentMediaType":"application/json"}}}},"404":{"description":"Resource not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse","contentMediaType":"application/json"}}}},"500":{"description":"Internal server error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse","contentMediaType":"application/json"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OrderResponse"}}}}}},"put":{"tags":["Maintenance Orders"],"summary":"Update a maintenance order by ID","operationId":"updateOrder","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderRequest"}}},"required":true},"responses":{"400":{"description":"Invalid input","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse","contentMediaType":"application/json"}}}},"404":{"description":"Resource not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse","contentMediaType":"application/json"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse","contentMediaType":"application/json"}}}},"500":{"description":"Internal server error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse","contentMediaType":"application/json"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OrderResponse"}}}}}},"delete":{"tags":["Maintenance Orders"],"summary":"Delete a maintenance order by ID","operationId":"deleteOrder","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"400":{"description":"Invalid input","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse","contentMediaType":"application/json"}}}},"404":{"description":"Resource not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse","contentMediaType":"application/json"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse","contentMediaType":"application/json"}}}},"500":{"description":"Internal server error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse","contentMediaType":"application/json"}}}},"204":{"description":"No Content"}}}},"/api/maintenance/orders":{"get":{"tags":["Maintenance Orders"],"summary":"Get a list of all maintenance orders. Optionally filter by asset ID","operationId":"getAllOrders","parameters":[{"name":"assetId","in":"query","required":false,"schema":{"type":"string"}}],"responses":{"400":{"description":"Invalid input","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse","contentMediaType":"application/json"}}}},"404":{"description":"Resource not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse","contentMediaType":"application/json"}}}},"500":{"description":"Internal server error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse","contentMediaType":"application/json"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OrderResponse"}}}}}}},"post":{"tags":["Maintenance Orders"],"summary":"Create a new maintenance order","operationId":"createOrder","parameters":[{"name":"X-User-Id","in":"header","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderRequest"}}},"required":true},"responses":{"400":{"description":"Invalid input","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse","contentMediaType":"application/json"}}}},"404":{"description":"Resource not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse","contentMediaType":"application/json"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse","contentMediaType":"application/json"}}}},"500":{"description":"Internal server error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse","contentMediaType":"application/json"}}}},"201":{"description":"Created","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OrderResponse"}}}}}}},"/api/maintenance/orders/{orderId}/notes":{"get":{"tags":["Maintenance Order Notes"],"summary":"Get all notes for a maintenance order","operationId":"getNotes","parameters":[{"name":"orderId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"400":{"description":"Invalid input","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse","contentMediaType":"application/json"}}}},"404":{"description":"Resource not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse","contentMediaType":"application/json"}}}},"500":{"description":"Internal server error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse","contentMediaType":"application/json"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OrderNoteResponse"}}}}}}},"post":{"tags":["Maintenance Order Notes"],"summary":"Add a note to a maintenance order","operationId":"addNote","parameters":[{"name":"orderId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"X-User-Id","in":"header","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderNoteRequest"}}},"required":true},"responses":{"400":{"description":"Invalid input","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse","contentMediaType":"application/json"}}}},"404":{"description":"Resource not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse","contentMediaType":"application/json"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse","contentMediaType":"application/json"}}}},"500":{"description":"Internal server error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse","contentMediaType":"application/json"}}}},"201":{"description":"Created","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OrderNoteResponse"}}}}}}},"/api/maintenance/orders/{orderId}/notes/{noteId}":{"delete":{"tags":["Maintenance Order Notes"],"summary":"Delete a note from a maintenance order","operationId":"deleteNote","parameters":[{"name":"orderId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"noteId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"400":{"description":"Invalid input","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse","contentMediaType":"application/json"}}}},"404":{"description":"Resource not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse","contentMediaType":"application/json"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse","contentMediaType":"application/json"}}}},"500":{"description":"Internal server error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse","contentMediaType":"application/json"}}}},"204":{"description":"No Content"}}}}},"components":{"schemas":{"OrderRequest":{"type":"object","properties":{"assetId":{"type":"string","maxLength":255,"minLength":0},"description":{"type":"string","minLength":1},"status":{"type":"string","enum":["PENDING","IN_PROGRESS","COMPLETED","CANCELLED"]},"priority":{"type":"integer","format":"int32","maximum":5,"minimum":1}},"required":["assetId","description","priority","status"]},"ErrorResponse":{"type":"object","properties":{"status":{"type":"integer","format":"int32"},"error":{"type":"string"},"message":{"type":"string"},"data":{},"timestamp":{"type":"string"}}},"AssetResponse":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"type":{"type":"string","enum":["SHIP","SUBMARINE","AIRCRAFT","DRONE","GROUND_VEHICLE"]},"status":{"type":"string","enum":["ACTIVE","MAINTENANCE","INACTIVE"]},"longitude":{"type":"number","format":"double"},"latitude":{"type":"number","format":"double"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}}},"OrderResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"asset":{"$ref":"#/components/schemas/AssetResponse"},"description":{"type":"string"},"status":{"type":"string","enum":["PENDING","IN_PROGRESS","COMPLETED","CANCELLED"]},"priority":{"type":"integer","format":"int32"},"placedBy":{"$ref":"#/components/schemas/User"},"completedBy":{"$ref":"#/components/schemas/User"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}}},"User":{"type":"object","properties":{"id":{"type":"string"},"username":{"type":"string"},"email":{"type":"string"},"firstName":{"type":"string"},"lastName":{"type":"string"},"enabled":{"type":"boolean"},"createdTimestamp":{"type":"integer","format":"int64"},"roles":{"type":"array","items":{"type":"string"}}}},"OrderNoteRequest":{"type":"object","properties":{"note":{"type":"string","minLength":1}},"required":["note"]},"OrderNoteResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"orderId":{"type":"integer","format":"int64"},"note":{"type":"string"},"createdBy":{"$ref":"#/components/schemas/User"},"createdAt":{"type":"string","format":"date-time"}}}},"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}}}}